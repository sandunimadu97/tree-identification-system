{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport axios from \"axios\";\nimport { db } from \"../../config\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar ResultScreen = function ResultScreen(_ref) {\n  var navigation = _ref.navigation,\n    route = _ref.route;\n  var image = route.params.image;\n  var _useState = useState({}),\n    _useState2 = _slicedToArray(_useState, 2),\n    result = _useState2[0],\n    setResult = _useState2[1];\n  var _useState3 = useState({}),\n    _useState4 = _slicedToArray(_useState3, 2),\n    tree = _useState4[0],\n    setTree = _useState4[1];\n  useEffect(function () {\n    var getDetails = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        try {\n          var formData = new FormData();\n          formData.append(\"image\", {\n            uri: image,\n            name: \"image.jpg\",\n            type: \"image/jpeg\"\n          });\n          console.log(formData);\n          var response = yield axios.post(\"https://6192-2407-c00-c000-c8c7-f132-96b-25b5-b4ba.ngrok-free.app/classify\", formData, {\n            headers: {\n              \"Content-Type\": \"multipart/form-data\"\n            }\n          });\n          console.log(\"Here\");\n          setResult(response.data);\n          console.log(response.data);\n        } catch (error) {\n          console.error(\"Error:\", error);\n        }\n      });\n      return function getDetails() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    getDetails();\n  }, []);\n  var handleViewDetails = function handleViewDetails() {\n    db.collection(\"trees\").where(\"name\", \"==\", result.predicted_class).get().then(function (querySnapshot) {\n      if (querySnapshot.empty) {\n        console.log(\"No document found.\");\n        return;\n      }\n      querySnapshot.forEach(function (doc) {\n        console.log(\"document:\", doc.data());\n        navigation.navigate(\"info\", {\n          tree: doc.data()\n        });\n      });\n    }).catch(function (error) {\n      console.error(\"Error fetching document:\", error);\n    });\n  };\n  var handleRetry = function handleRetry() {\n    navigation.goBack();\n  };\n  return _jsxs(SafeAreaView, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.title,\n      children: \"Image Results\"\n    }), _jsx(Image, {\n      source: {\n        uri: image\n      },\n      style: styles.image\n    }), _jsx(Text, {\n      style: styles.subTitle,\n      children: \"Result\"\n    }), _jsx(Text, {\n      style: styles.resultText,\n      children: result.predicted_class ? result.predicted_class : \"Loading ...\"\n    }), _jsxs(Text, {\n      style: styles.confidenceText,\n      children: [\"Search Confidence =\", \" \", result.confidence ? (result.confidence * 100).toFixed(2) + \"%\" : \"Loading ...\"]\n    }), _jsx(TouchableOpacity, {\n      style: styles.detailsButton,\n      onPress: handleViewDetails,\n      children: _jsx(Text, {\n        style: styles.detailsButtonText,\n        children: \"View More Details\"\n      })\n    }), _jsx(TouchableOpacity, {\n      style: styles.retryButton,\n      onPress: handleRetry,\n      children: _jsx(Text, {\n        style: styles.retryButtonText,\n        children: \"Retry\"\n      })\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    width: \"100%\"\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: \"bold\",\n    marginBottom: 20,\n    marginTop: 20\n  },\n  image: {\n    width: 200,\n    height: 200,\n    resizeMode: \"cover\",\n    marginBottom: 70,\n    borderRadius: 8\n  },\n  subTitle: {\n    fontSize: 20,\n    fontWeight: \"bold\",\n    alignSelf: \"flex-start\",\n    marginLeft: 20\n  },\n  resultText: {\n    fontSize: 30,\n    marginBottom: 10\n  },\n  confidenceText: {\n    fontSize: 16,\n    marginBottom: 100\n  },\n  detailsButton: {\n    width: \"80%\",\n    height: 60,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: \"#000000\",\n    borderRadius: 8,\n    marginBottom: 10\n  },\n  detailsButtonText: {\n    fontSize: 18,\n    color: \"white\",\n    fontWeight: \"bold\"\n  },\n  retryButton: {\n    width: \"80%\",\n    height: 60,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: \"white\",\n    borderRadius: 8,\n    borderWidth: 2,\n    borderColor: \"#000000\"\n  },\n  retryButtonText: {\n    fontSize: 18,\n    color: \"#000000\",\n    fontWeight: \"bold\"\n  }\n});\nexport default ResultScreen;","map":{"version":3,"names":["React","useEffect","useState","View","Text","StyleSheet","Image","TouchableOpacity","SafeAreaView","axios","db","jsx","_jsx","jsxs","_jsxs","ResultScreen","_ref","navigation","route","image","params","_useState","_useState2","_slicedToArray","result","setResult","_useState3","_useState4","tree","setTree","getDetails","_ref2","_asyncToGenerator","formData","FormData","append","uri","name","type","console","log","response","post","headers","data","error","apply","arguments","handleViewDetails","collection","where","predicted_class","get","then","querySnapshot","empty","forEach","doc","navigate","catch","handleRetry","goBack","style","styles","container","children","title","source","subTitle","resultText","confidenceText","confidence","toFixed","detailsButton","onPress","detailsButtonText","retryButton","retryButtonText","create","flex","alignItems","width","fontSize","fontWeight","marginBottom","marginTop","height","resizeMode","borderRadius","alignSelf","marginLeft","justifyContent","backgroundColor","color","borderWidth","borderColor"],"sources":["G:/Work/Shenal/App/src/Views/Result.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { View, Text, StyleSheet, Image, TouchableOpacity } from \"react-native\";\r\nimport { SafeAreaView } from \"react-native-safe-area-context\";\r\nimport axios from \"axios\";\r\nimport { db } from \"../../config\";\r\n\r\nconst ResultScreen = ({ navigation, route }) => {\r\n  const { image } = route.params;\r\n  const [result, setResult] = useState({});\r\n  const [tree, setTree] = useState({});\r\n\r\n  useEffect(() => {\r\n    const getDetails = async () => {\r\n      try {\r\n        const formData = new FormData();\r\n        formData.append(\"image\", {\r\n          uri: image,\r\n          name: \"image.jpg\",\r\n          type: \"image/jpeg\",\r\n        });\r\n\r\n        console.log(formData);\r\n\r\n        const response = await axios.post(\r\n          \"https://6192-2407-c00-c000-c8c7-f132-96b-25b5-b4ba.ngrok-free.app/classify\",\r\n          formData,\r\n          {\r\n            headers: {\r\n              \"Content-Type\": \"multipart/form-data\",\r\n            },\r\n          }\r\n        );\r\n        console.log(\"Here\");\r\n        setResult(response.data);\r\n        console.log(response.data);\r\n      } catch (error) {\r\n        console.error(\"Error:\", error);\r\n      }\r\n    };\r\n\r\n    getDetails();\r\n  }, []);\r\n\r\n  const handleViewDetails = () => {\r\n    db.collection(\"trees\")\r\n      .where(\"name\", \"==\", result.predicted_class)\r\n      .get()\r\n      .then((querySnapshot) => {\r\n        if (querySnapshot.empty) {\r\n          console.log(\"No document found.\");\r\n          return;\r\n        }\r\n\r\n        querySnapshot.forEach((doc) => {\r\n          console.log(\"document:\", doc.data());\r\n          navigation.navigate(\"info\", { tree: doc.data() });\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error fetching document:\", error);\r\n      });\r\n  };\r\n\r\n  const handleRetry = () => {\r\n    navigation.goBack();\r\n  };\r\n\r\n  return (\r\n    <SafeAreaView style={styles.container}>\r\n      <Text style={styles.title}>Image Results</Text>\r\n      <Image source={{ uri: image }} style={styles.image} />\r\n      <Text style={styles.subTitle}>Result</Text>\r\n      <Text style={styles.resultText}>\r\n        {result.predicted_class ? result.predicted_class : \"Loading ...\"}\r\n      </Text>\r\n      <Text style={styles.confidenceText}>\r\n        Search Confidence ={\" \"}\r\n        {result.confidence\r\n          ? (result.confidence * 100).toFixed(2) + \"%\"\r\n          : \"Loading ...\"}\r\n      </Text>\r\n      <TouchableOpacity\r\n        style={styles.detailsButton}\r\n        onPress={handleViewDetails}\r\n      >\r\n        <Text style={styles.detailsButtonText}>View More Details</Text>\r\n      </TouchableOpacity>\r\n      <TouchableOpacity style={styles.retryButton} onPress={handleRetry}>\r\n        <Text style={styles.retryButtonText}>Retry</Text>\r\n      </TouchableOpacity>\r\n    </SafeAreaView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: \"center\",\r\n    width: \"100%\",\r\n  },\r\n  title: {\r\n    fontSize: 24,\r\n    fontWeight: \"bold\",\r\n    marginBottom: 20,\r\n    marginTop: 20,\r\n  },\r\n  image: {\r\n    width: 200,\r\n    height: 200,\r\n    resizeMode: \"cover\",\r\n    marginBottom: 70,\r\n    borderRadius: 8,\r\n  },\r\n  subTitle: {\r\n    fontSize: 20,\r\n    fontWeight: \"bold\",\r\n    alignSelf: \"flex-start\",\r\n    marginLeft: 20,\r\n  },\r\n  resultText: {\r\n    fontSize: 30,\r\n    marginBottom: 10,\r\n  },\r\n  confidenceText: {\r\n    fontSize: 16,\r\n    marginBottom: 100,\r\n  },\r\n  detailsButton: {\r\n    width: \"80%\",\r\n    height: 60,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#000000\",\r\n    borderRadius: 8,\r\n    marginBottom: 10,\r\n  },\r\n  detailsButtonText: {\r\n    fontSize: 18,\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n  },\r\n  retryButton: {\r\n    width: \"80%\",\r\n    height: 60,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"white\",\r\n    borderRadius: 8,\r\n    borderWidth: 2,\r\n    borderColor: \"#000000\",\r\n  },\r\n  retryButtonText: {\r\n    fontSize: 18,\r\n    color: \"#000000\",\r\n    fontWeight: \"bold\",\r\n  },\r\n});\r\n\r\nexport default ResultScreen;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}